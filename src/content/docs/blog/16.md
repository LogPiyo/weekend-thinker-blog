---
title: 'XML入門'
description: 'XMLの基本的な概念と構造について解説します。具体的には，XMLの構造、文字参照、DTD（Document Type Definition）、外部ファイルからのインポート、実体宣言などについて説明します。'
pubDate: '2025/07/20'
heroImage: ''
tags: ['プログラミング', 'XML']
sidebar:
  badge: 'XML'
---

XMLとは、**Extensible Markup Language**（拡張可能なマークアップ言語）の略である。

### なぜ使うか
XMLは、言語の**構造**を規定し、それに**厳密に従った文書**を生成できる。したがって、新しい言語を作る場合はXMLへの理解が欠かせない。
また、XMLは文書の構造に**意味づけ**をすることができる。例えば、数式を記述する言語であるTeXは、厳密に数式の意味づけをしているわけではない。

### XMLの構造
XMLは、**処理命令**・**要素**・**属性**の集まりによって構成される。

#### 処理命令
```xml
<?xml version="1.1" encoding="UTF-8" ?>
```

#### コメント

```xml
<!-- この中の文字はコメントとみなされる -->
```
- XML宣言の前では使用できない。
- コメント内で `--` を記述することはできない。

#### 要素
要素は、**タグ**と**内容**から構成される。
```xml
<タグ 属性="abc">内容</タグ>
```
例:

```xml
<sample attr="abc">text</sample>
```

##### 空要素
```xml
<img src="path/to/image" />
```
内容がない場合、上記のように記述できる。したがって、
```xml
<img></img>
```
と
```xml
<img/>
```
は等価である。

##### ルート要素
XML文書内のすべての要素は、**1つのルート要素**で囲まれていなければならない。

### 文字参照
特殊文字を表示したい場合、**文字参照**を使う。これには2種類ある。

#### 数値文字参照
形式：
- `&#0000;`（10進数）
- `&#x00AB;`（16進数）
例：
```xml
&#8747;
```
は積分記号「∫」を表す。
```xml
&#x222B;
```
も同様に「∫」を表す（Unicodeで「∫」は `U+222B`）。

#### 文字実体参照
数字以外の文字を指定する場合、**実体参照**を用いる。
例：
```xml
&amp;
```
はアンパサンド「&」を表す。
XMLでデフォルトで使用可能な文字実体は以下の5つ：
- `&amp;` ：アンパサンド（`&`）
- `&lt;` ：小なり記号（`<`）
- `&gt;` ：大なり記号（`>`）
- `&quot;`：二重引用符（`"`）
- `&apos;`：一重引用符（`'`）
他の文字を実体参照で書きたい場合は、**文書型宣言**をする必要がある。

#### CDATAセクション
CDATAとは **Character Data** の略。特殊文字を含む文字列をそのまま記述したい場合に使用する。
通常：
```xml
<text>Tom & Jerry</text>
```
はエラーになるため、以下のように書く：
```xml
<text>
  <![CDATA[
    Tom & Jerry
  ]]>
</text>
```

### DTD（Document Type Definition）
DTDでは、XML文書の**構造**を定義する。

#### 文書型宣言と要素型宣言
例えば以下のXML構造：
```xml
<分数>
  <分母></分母>
  <分子></分子>
</分数>
```
は次のようなDTDで定義できる：
```xml
<!DOCTYPE 分数[
  <!ELEMENT 分数 (分母, 分子)>
  <!ELEMENT 分母 (#PCDATA)>
  <!ELEMENT 分子 (#PCDATA)>
]>
```

##### 構文：
- 文書型宣言：
```xml
<!DOCTYPE ルート要素名 [ ... ]>
```
- 要素型宣言：
```xml
<!ELEMENT 親要素名 (子要素1, 子要素2, ...)>
```
- 使用可能な記号：
  - `|`：または
  - `EMPTY`：空要素
  - `ANY`：任意の内容
  - `*`：0回以上
  - `+`：1回以上
  - `?`：0回または1回

##### 例：
```xml
<!DOCTYPE 買い物リスト[
  <!ELEMENT 買い物リスト (食品* | 日用品*)>
  <!ELEMENT 食品 (価格, 画像+, その他?)>
  <!ELEMENT 日用品 (価格, 画像+, その他?)>
  <!ELEMENT 価格 (#PCDATA)>
  <!ELEMENT 画像 EMPTY>
  <!ELEMENT その他 ANY>
]>
```

#### 属性の定義
属性を定義するには、次のように書く：
```xml
<!ATTLIST 要素名 属性名 属性値の候補 デフォルト値>
```

##### 属性値の候補
- 任意の文字列：`CDATA`
- 選択肢：`(値1 | 値2 | ...)`
- 一意なID：`ID`
- 他のID参照：`IDREF`, `IDREFS`
- 名前トークン：`NMTOKEN`, `NMTOKENS`
- エンティティ名：`ENTITY`, `ENTITIES`

##### デフォルト値の指定
- 必須：`#REQUIRED`
- 任意：`#IMPLIED`
- 固定値：`#FIXED "値"`

### 外部ファイルからのインポート
外部のDTDを利用したい場合：
```xml
<!DOCTYPE ルート要素名 SYSTEM "ファイル名">
```

### 実体宣言
#### 内部実体
```xml
<!ENTITY 実体名 "文字列">
```
例：
```xml
<!ENTITY 挨拶 "こんにちは">
```
使用例：
```xml
&挨拶;
```
→ `こんにちは` に展開される。

#### 外部実体
```xml
<!ENTITY 実体名 SYSTEM "URLまたはファイル名">
```